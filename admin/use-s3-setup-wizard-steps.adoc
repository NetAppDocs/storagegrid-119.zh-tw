---
permalink: admin/use-s3-setup-wizard-steps.html 
sidebar: sidebar 
keywords: FabricPool and S3 setup wizard, object storage system, S3 application 
summary: 您可以使用 S3 設定精靈將StorageGRID配置為 S3 應用程式的物件儲存系統。 
---
= 存取並完成 S3 設定精靈
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用 S3 設定精靈配置StorageGRID以用於 S3 應用程式。安裝精靈提供了應用程式存取StorageGRID儲存桶和保存物件所需的值。

.開始之前
* 你有link:admin-group-permissions.html["Root存取權限"]。
* 您已審閱link:use-s3-setup-wizard.html["注意事項和要求"]使用嚮導。




== 訪問嚮導

.步驟
. Sign inlink:web-browser-requirements.html["支援的網頁瀏覽器"]。
. 如果儀表板上出現 * FabricPool和 S3 設定精靈* 橫幅，請選擇橫幅中的連結。如果橫幅不再出現，請從網格管理器的標題列中選擇幫助圖標，然後選擇* FabricPool和 S3 設定精靈*。
+
image::../media/help_menu.png[幫助菜單]

. 在FabricPool和 S3 設定精靈頁面的 S3 應用程式部分中，選擇 *立即配置*。




== 步驟 1（共 6 步）：配置 HA 組

HA 群組是每個包含StorageGRID負載平衡器服務的節點集合。  HA 群組可以包含網關節點、管理節點或兩者。

您可以使用 HA 組來幫助保持 S3 資料連線可用。如果 HA 組中的活動介面發生故障，則備份介面可以管理工作負載，而對 S3 作業的影響很小。

有關此任務的詳細信息，請參閱link:managing-high-availability-groups.html["管理高可用性組"]。

.步驟
. 如果您打算使用外部負載平衡器，則無需建立 HA 群組。選擇“跳過此步驟”並前往<<第 2 步（共 6 步）：配置負載平衡器端點>>。
. 若要使用StorageGRID負載平衡器，您可以建立一個新的 HA 群組或使用現有的 HA 群組。
+
[role="tabbed-block"]
====
.建立 HA 組
--
.. 若要建立新的 HA 群組，請選擇*建立 HA 組*。
.. 對於*輸入詳細資料*步驟，請填寫以下欄位。
+
[cols="1a,2a"]
|===
| 場地 | 描述 


 a| 
HA組名稱
 a| 
此 HA 組的唯一顯示名稱。



 a| 
描述（可選）
 a| 
該 HA 組的描述。

|===
.. 對於*新增介面*步驟，選擇您想要在此 HA 群組中使用的節點介面。
+
使用列標題對行進行排序，或輸入搜尋字詞以更快找到介面。

+
您可以選擇一個或多個節點，但每個節點只能選擇一個介面。

.. 對於*優先考慮介面*步驟，請確定此 HA 群組的主介面和任何備份介面。
+
拖曳行來變更「優先順序」列中的值。

+
清單中的第一個介面是主介面。除非發生故障，否則主介面是活動介面。

+
如果 HA 群組包含多個介面且活動介面發生故障，則虛擬 IP (VIP) 位址將依優先順序移至第一個備份介面。如果該接口發生故障，VIP 位址將移動到下一個備份接口，依此類推。當故障解決後，VIP 位址將移回可用的最高優先權介面。

.. 對於*輸入 IP 位址*步驟，請填寫以下欄位。
+
[cols="1a,2a"]
|===
| 場地 | 描述 


 a| 
子網路 CIDR
 a| 
CIDR 表示法中的 VIP 子網路位址－IPv4 位址後面接著斜槓和子網路長度（0-32）。

網路位址不得設定任何主機位元。例如，  `192.16.0.0/22` 。



 a| 
網關 IP 位址（可選）
 a| 
如果用於存取StorageGRID 的S3 IP 位址與StorageGRID VIP 位址不在同一子網路中，請輸入StorageGRID VIP 本機閘道 IP 位址。本機網關IP位址必須在VIP子網路內。



 a| 
虛擬 IP 位址
 a| 
為 HA 組中的活動介面輸入至少一個、最多十個 VIP 位址。所有 VIP 位址都必須位於 VIP 子網路內。

至少一個位址必須是 IPv4。您也可以選擇指定其他 IPv4 和 IPv6 位址。

|===
.. 選擇*建立 HA 組*，然後選擇*完成*返回 S3 設定精靈。
.. 選擇“*繼續*”進入負載平衡器步驟。


--
.使用現有的 HA 組
--
.. 若要使用現有的 HA 組，請從 *選擇 HA 組* 中選擇 HA 組名稱。
.. 選擇“*繼續*”進入負載平衡器步驟。


--
====




== 第 2 步（共 6 步）：配置負載平衡器端點

StorageGRID使用負載平衡器來管理來自用戶端應用程式的工作負載。負載平衡可最大限度地提高多個儲存節點的速度和連接容量。

您可以使用所有閘道器和管理節點上存在的StorageGRID負載平衡器服務，也可以連接到外部（第三方）負載平衡器。建議使用StorageGRID負載平衡器。

有關此任務的詳細信息，請參閱link:managing-load-balancing.html["負載平衡的注意事項"]。

若要使用StorageGRID負載平衡器服務，請選擇 * StorageGRID負載平衡器* 選項卡，然後建立或選擇要使用的負載平衡器端點。若要使用外部負載平衡器，請選擇“*外部負載平衡器*”標籤並提供有關已配置的系統的詳細資訊。

[role="tabbed-block"]
====
.建立端點
--
.步驟
. 若要建立負載平衡器端點，請選擇*建立端點*。
. 對於*輸入端點詳細資料*步驟，請填寫以下欄位。
+
[cols="1a,2a"]
|===
| 場地 | 描述 


 a| 
Name
 a| 
端點的描述性名稱。



 a| 
港口
 a| 
您想要用於負載平衡的StorageGRID連接埠。對於您建立的第一個端點，此欄位預設為 10433，但您可以輸入任何未使用的外部連接埠。如果輸入 80 或 443，則端點僅在網關節點上配置，因為這些連接埠在管理節點上保留。

*注意：*不允許使用其他網格服務使用的連接埠。查看link:../network/network-port-reference.html["網路連接埠參考"]。



 a| 
客戶端類型
 a| 
必須是*S3*。



 a| 
網路協定
 a| 
選擇 *HTTPS*。

*注意*：支援但不建議使用沒有 TLS 加密的StorageGRID進行通訊。

|===
. 對於*選擇綁定模式*步驟，指定綁定模式。綁定模式控制如何使用任意 IP 位址或使用特定 IP 位址和網路介面存取端點。
+
[cols="1a,3a"]
|===
| 模式 | 描述 


 a| 
全域（預設）
 a| 
用戶端可以使用任何網關節點或管理節點的 IP 位址、任何網路上任何 HA 群組的虛擬 IP (VIP) 位址或對應的 FQDN 存取端點。

除非您需要限制此端點的可存取性，否則請使用*全域*設定（預設）。



 a| 
HA 群組的虛擬 IP
 a| 
用戶端必須使用 HA 群組的虛擬 IP 位址（或對應的 FQDN）來存取此端點。

具有此綁定模式的端點都可以使用相同的連接埠號，只要您為端點選擇的 HA 群組不重疊。



 a| 
節點介面
 a| 
用戶端必須使用選定節點介面的 IP 位址（或對應的 FQDN）來存取此端點。



 a| 
節點類型
 a| 
根據您選擇的節點類型，用戶端必須使用任何管理節點的 IP 位址（或對應的 FQDN）或任何網關節點的 IP 位址（或對應的 FQDN）來存取此端點。

|===
. 對於租戶存取步驟，選擇以下選項之一：
+
[cols="1a,2a"]
|===
| 場地 | 描述 


 a| 
允許所有租戶（預設）
 a| 
所有租用戶帳戶都可以使用此端點存取他們的儲存桶。



 a| 
允許選定的租戶
 a| 
只有選定的租用戶帳戶可以使用此端點存取他們的儲存桶。



 a| 
阻止選定的租戶
 a| 
選定的租用戶帳戶不能使用此端點存取其儲存桶。所有其他租戶都可以使用此端點。

|===
. 對於*附加憑證*步驟，選擇以下之一：
+
[cols="1a,2a"]
|===
| 場地 | 描述 


 a| 
上傳證書（推薦）
 a| 
使用此選項上傳 CA 簽署的伺服器憑證、憑證私鑰和可選的 CA 套件。



 a| 
產生證書
 a| 
使用此選項產生自簽名憑證。看link:configuring-load-balancer-endpoints.html["配置負載平衡器端點"]了解輸入內容的詳細資訊。



 a| 
使用StorageGRID S3 證書
 a| 
僅當您已上傳或產生StorageGRID全域憑證的自訂版本時才使用此選項。看link:configuring-custom-server-certificate-for-storage-node.html["配置 S3 API 證書"]了解詳情。

|===
. 選擇“*完成*”返回 S3 安裝精靈。
. 選擇“*繼續*”進入租戶和儲存桶步驟。



NOTE: 端點憑證的變更可能需要長達 15 分鐘才能套用到所有節點。

--
.使用現有的負載平衡器端點
--
.步驟
. 若要使用現有端點，請從*選擇負載平衡器端點*中選擇其名稱。
. 選擇“*繼續*”進入租戶和儲存桶步驟。


--
.使用外部負載平衡器
--
.步驟
. 若要使用外部負載平衡器，請填寫以下欄位。
+
[cols="1a,2a"]
|===
| 場地 | 描述 


 a| 
完全限定域名 (FQDN)
 a| 
外部負載平衡器的完全限定網域名稱 (FQDN)。



 a| 
港口
 a| 
S3 應用程式將用於連接外部負載平衡器的連接埠號碼。



 a| 
證書
 a| 
複製外部負載平衡器的伺服器憑證並將其貼上到此欄位中。

|===
. 選擇“*繼續*”進入租戶和儲存桶步驟。


--
====


== 步驟 3（共 6 步）：建立租用戶和儲存桶

租用戶是可以使用 S3 應用程式在StorageGRID中儲存和擷取物件的實體。每個租戶都有自己的使用者、存取金鑰、儲存桶、物件和一組特定的功能。

bucket 是用於儲存租用戶的物件和物件元資料的容器。儘管租戶可能擁有多個儲存桶，但精靈可以協助您以最快捷、最簡單的方式建立租用戶和儲存桶。如果您稍後需要新增儲存桶或設定選項，則可以使用租用戶管理器。

有關此任務的詳細信息，請參閱link:creating-tenant-account.html["建立租用戶帳戶"]和link:../tenant/creating-s3-bucket.html["建立 S3 儲存桶"]。

.步驟
. 輸入租用戶帳戶的名稱。
+
租戶名稱不需要是唯一的。建立租用戶帳戶時，它會收到一個唯一的數位帳戶 ID。

. 根據您的StorageGRID系統是否使用，定義租用​​戶帳戶的根存取權限link:using-identity-federation.html["身分聯合"]，link:configuring-sso.html["單一登入（SSO）"] ，或兩者兼而有之。
+
[cols="1a,2a"]
|===
| 選項 | 執行此操作 


 a| 
如果未啟用身份聯合
 a| 
指定以本機 root 使用者身分登入租用戶時所使用的密碼。



 a| 
如果啟用了身份聯合
 a| 
.. 選擇一個現有的聯合組link:../tenant/tenant-management-permissions.html["Root存取權限"]對於租戶來說。
.. 或者，指定以本機 root 使用者身分登入租用戶時所使用的密碼。




 a| 
如果同時啟用身份聯合和單一登入 (SSO)
 a| 
選擇一個現有的聯合組link:../tenant/tenant-management-permissions.html["Root存取權限"]對於租戶來說。沒有本地用戶可以登入。

|===
. 如果您希望精靈為根使用者建立存取金鑰 ID 和秘密存取金鑰，請選擇*自動建立根使用者 S3 存取金鑰*。
+
如果租戶的唯一用戶是根用戶，請選擇此選項。如果其他使用者要使用此租戶，link:../tenant/index.html["使用租戶管理器"]配置金鑰和權限。

. 如果您現在要為該租用戶建立儲存桶，請選擇「為該租用戶建立儲存桶」。
+

TIP: 如果為網格啟用了 S3 物件鎖，則在此步驟中建立的儲存桶未啟用 S3 物件鎖。如果您需要為此 S3 應用程式使用 S3 物件鎖定儲存桶，請不要選擇現在建立儲存桶。相反，使用租戶管理器link:../tenant/creating-s3-bucket.html["建立儲存桶"]之後。

+
.. 輸入 S3 應用程式將使用的儲存桶的名稱。例如，  `s3-bucket` 。
+
建立儲存桶後，您無法變更儲存桶名稱。

.. 選擇此儲存桶的*區域*。
+
使用預設區域(`us-east-1`) 除非您期望將來使用 ILM 根據儲存桶的區域過濾物件。



. 選擇*建立並繼續*。




== [[download-data]]第 4 步（共 6 步）：下載數據

在下載資料步驟中，您可以下載一個或兩個檔案來保存剛剛配置的詳細資訊。

.步驟
. 如果您選擇了“自動建立根用戶 S3 存取金鑰”，請執行下列操作之一或全部執行：
+
** 選擇*下載存取金鑰*下載 `.csv`包含租用戶帳戶名稱、存取金鑰 ID 和秘密存取金鑰的檔案。
** 選擇複製圖示 (image:../media/icon_tenant_copy_url.png["複製圖示"] ) 將存取金鑰 ID 和秘密存取金鑰複製到剪貼簿。


. 選擇*下載設定值*來下載 `.txt`包含負載平衡器端點、租用戶、儲存桶和根用戶的設定的檔案。
. 將此資訊儲存到安全的位置。
+

CAUTION: 在複製兩個存取金鑰之前，請勿關閉此頁面。關閉此頁面後，密鑰將不可用。確保將此資訊保存在安全的位置，因為它可用於從StorageGRID系統取得資料。

. 如果出現提示，請選取核取方塊以確認您已下載或複製金鑰。
. 選擇“*繼續*”前往 ILM 規則和策略步驟。




== 步驟 5（共 6 步）：查看 S3 的 ILM 規則和 ILM 策略

資訊生命週期管理 (ILM) 規則控制StorageGRID系統中所有物件的放置、持續時間和攝取行為。 StorageGRID附帶的​​ ILM 策略為所有物件製作了兩個副本。此策略將一直有效，直到您啟動至少一項新策略為止。

.步驟
. 查看頁面上提供的資訊。
. 如果您要為屬於新租用戶或儲存桶的物件新增具體說明，請建立新規則和新策略。看link:../ilm/access-create-ilm-rule-wizard.html["建立 ILM 規則"]和link:../ilm/ilm-policy-overview.html["使用 ILM 策略"]。
. 選擇*我已查看這些步驟並了解我需要做什麼*。
. 選取核取方塊表示您了解下一步該做什麼。
. 選擇“*繼續*”前往“*摘要*”。




== 第 6 步（共 6 步）：審核摘要

.步驟
. 查看摘要。
. 記下後續步驟中的詳細信息，這些詳細資訊描述了連接到 S3 用戶端之前可能需要的附加配置。例如，選擇「以 root 身分Sign in」將帶您進入租用戶管理器，您可以在其中新增租用戶用戶、建立其他儲存桶以及更新儲存桶設定。
. 選擇*完成*。
. 使用從StorageGRID下載的檔案或手動取得的值來設定應用程式。

