---
permalink: admin/grid-federation-troubleshoot.html 
sidebar: sidebar 
keywords: troubleshoot, grid federation connection, account clone, cross-grid replication, alerts, errors 
summary: 您可能需要排除與網格聯合連接、帳戶複製和跨網格複製相關的警報和錯誤。 
---
= 解決網格聯合錯誤
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可能需要排除與網格聯合連接、帳戶複製和跨網格複製相關的警報和錯誤。



== [[grid-federation-errors]]網格聯合連接警報和錯誤

您可能會收到警報或遇到電網聯合連接錯誤。

進行任何變更以解決連線問題後，請測試連線以確保連線狀態已返回*已連線*。有關說明，請參閱link:grid-federation-manage-connection.html["管理電網聯合連接"]。



=== 電網聯合連接失敗警報

.問題
觸發了「電網聯合連線失敗」警報。

.細節
此警報表示網格之間的網格聯合連接無法運作。

.建議的操作
. 檢查兩個網格的網格聯合頁面上的設定。確認所有數值均正確。看link:grid-federation-manage-connection.html["管理電網聯合連接"] 。
. 檢查用於連接的憑證。確保沒有關於網格聯合證書過期的警報，並且每個證書的詳細資訊都是有效的。請參閱輪換連接證書的說明link:grid-federation-manage-connection.html["管理電網聯合連接"]。
. 確認兩個網格中的所有管理節點和網關節點均在線且可用。解決可能影響這些節點的任何警報並重試。
. 如果您為本地或遠端網格提供了完全限定網域名稱 (FQDN)，請確認 DNS 伺服器在線上且可用。看link:grid-federation-overview.html["什麼是電網聯合？"]滿足網路、IP 位址和 DNS 需求。




=== 電網聯合證書到期警報

.問題
觸發了「電網聯合證書過期」警報。

.細節
此警示表示一個或多個網格聯合憑證即將過期。

.建議的操作
請參閱輪換連接證書的說明link:grid-federation-manage-connection.html["管理電網聯合連接"]。



=== 編輯電網聯合連接時出錯

.問題
編輯網格聯合連接時，選擇“儲存並測試”時會看到以下警告訊息：“無法在一個或多個節點上建立候選設定檔。”

.細節
當您編輯網格聯合連線時， StorageGRID會嘗試在第一個網格上的所有管理節點上儲存「候選設定」檔案。如果無法將此檔案儲存到所有管理節點（例如，由於管理節點處於離線狀態），則會出現警告訊息。

.建議的操作
. 從用於編輯連接的網格中，選擇*NODES*。
. 確認該網格的所有管理節點均在線。
. 如果任何節點處於離線狀態，請將其重新連線並嘗試再次編輯連線。




== 帳戶克隆錯誤



=== 無法登入克隆的租用戶帳戶

.問題
您無法登入克隆的租用戶帳戶。租戶管理員登入頁面上的錯誤訊息是「此帳戶的憑證無效。請重試。

.細節
出於安全原因，當租用戶帳戶從租用戶的來源網格複製到租用戶的目標網格時，您為租用戶的本機 root 使用者設定的密碼不會被複製。同樣，當租戶在其來源網格上建立本地用戶時，本地用戶密碼不會被複製到目標網格。

.建議的操作
在 root 使用者登入租用戶的目標網格之前，網格管理員必須先link:changing-password-for-tenant-local-root-user.html["更改本機 root 使用者的密碼"]在目標網格上。

在複製的本機使用者可以登入租用戶的目標網格之前，複製租用戶的根用戶必須在目標網格上為該用戶新增密碼。有關說明，請參閱link:../tenant/managing-local-users.html["管理本地用戶"]在使用租戶管理器的說明中。



=== 未使用克隆創建的租戶

.問題
使用 *使用網格聯合連線* 權限建立新租用戶後，您會看到訊息「建立租用戶時沒有複製」。

.細節
如果連線狀態更新延遲，則可能會出現此問題，這可能會導致不健康的連線被列為*已連線*。

.建議的操作
. 查看錯誤訊息中列出的原因並解決任何可能阻止連接工作的網路或其他問題。看<<grid-federation-errors,電網聯合連接警報和錯誤>> 。
. 依照說明測試電網聯合連接link:grid-federation-manage-connection.html["管理電網聯合連接"]確認問題已解決。
. 從租戶的來源網格中，選擇 *TENANTS*。
. 找到克隆失敗的租用戶帳戶。
. 選擇租戶名稱以顯示詳細資訊頁面。
. 選擇*重試帳戶克隆*。
+
image::../media/grid-federation-retry-account-clone.png[顯示錯誤訊息和「重試帳戶複製」按鈕的螢幕截圖]

+
如果錯誤已解決，租用戶帳戶現在將被複製到另一個網格。





== 跨網格複製警報和錯誤



=== 顯示連線或租戶的最後一個錯誤

.問題
什麼時候link:../monitor/grid-federation-monitor-connections.html["查看電網聯合連接"]（或當link:grid-federation-manage-tenants.html["管理獲準租戶"]對於連接），您會注意到連接詳細資訊頁面上的「最後錯誤」列中有一個錯誤。例如：

image::../media/grid-federation-last-error.png[螢幕截圖顯示了電網聯合連接的最後一個錯誤列中的一條訊息]

.細節
對於每個網格聯合連接，*最後一個錯誤*列顯示租戶資料複製到另一個網格時發生的最近錯誤（如果有）。此列僅顯示最後發生的跨網格複製錯誤；之前可能發生的錯誤將不會顯示。此列中的錯誤可能由於以下原因之一而發生：

* 未找到來源物件版本。
* 未找到來源儲存桶。
* 目標儲存桶已被刪除。
* 目標儲存桶已由其他帳戶重新建立。
* 目標儲存桶已暫停版本控制。
* 目標儲存桶由相同帳戶重新創建，但現在尚未版本控制。


.建議的操作
如果「*上次錯誤*」欄位中出現錯誤訊息，請依照下列步驟操作：

. 查看訊息文字。
. 執行任何建議的操作。例如，如果在目標儲存桶上暫停跨網格複製的版本控制，則重新啟用該儲存桶的版本控制。
. 從表格中選擇連線或租用戶帳戶。
. 選擇*清除錯誤*。
. 選擇“是”清除該訊息並更新系統狀態。
. 等待 5-6 分鐘，然後將新物件放入儲存桶中。確認錯誤訊息不再出現。
+

NOTE: 為確保清除錯誤訊息，請在訊息中的時間戳記之後至少等待 5 分鐘，然後再提取新物件。

+

TIP: 清除錯誤後，如果將物件提取到同樣存在錯誤的不同儲存桶中，則可能會出現新的*最後錯誤*。

. 若要確定是否有任何物件因儲存桶錯誤而複製失敗，請參閱link:../admin/grid-federation-retry-failed-replication.html["識別並重試失敗的複製操作"]。




=== 跨網格複製永久故障警報

.問題
觸發了「跨網格複製永久失敗」警報。

.細節
此警報表示由於需要使用者乾預才能解決的原因，租戶物件無法在兩個網格上的儲存桶之間複製。此警報通常是由來源儲存桶或目標儲存桶的變更引起的。

.建議的操作
. Sign in觸發警報的網格。
. 前往 *配置* > *系統* > *網格聯合*，然後找到警報中列出的連接名稱。
. 在「允許的租用戶」標籤上，檢視「*最後一個錯誤*」欄位以確定哪些租用戶帳戶有錯誤。
. 要了解有關失敗的更多信息，請參閱link:../monitor/grid-federation-monitor-connections.html["監控電網聯合連接"]查看跨網格複製指標。
. 對於每個受影響的租戶帳戶：
+
.. 請參閱link:../monitor/monitoring-tenant-activity.html["監控租戶活動"]確認租戶在目標網格上沒有超出其跨網格複製的配額。
.. 根據需要，增加目標網格上的租戶配額以允許保存新物件。


. 對於每個受影響的租戶，登入兩個網格上的租戶管理器，以便您可以比較儲存桶清單。
. 對於每個啟用了跨網格複製的儲存桶，請確認以下內容：
+
** 另一個網格上有一個針對同一租戶的對應儲存桶（必須使用完全相同的名稱）。
** 兩個儲存桶都啟用了物件版本控制（任一網格上都不能暫停版本控制）。
** 兩個儲存桶均已停用 S3 物件鎖。
** 兩個儲存桶均未處於*刪除物件：唯讀*狀態。


. 若要確認問題是否已解決，請參閱link:../monitor/grid-federation-monitor-connections.html["監控電網聯合連接"]查看跨網格複製指標，或執行下列步驟：
+
.. 返回網格聯合頁面。
.. 選擇受影響的租戶，然後在*最後一個錯誤*列中選擇*清除錯誤*。
.. 選擇“是”清除該訊息並更新系統狀態。
.. 等待 5-6 分鐘，然後將新物件放入儲存桶中。確認錯誤訊息不再出現。
+

NOTE: 為確保清除錯誤訊息，請在訊息中的時間戳記之後至少等待 5 分鐘，然後再提取新物件。

+

NOTE: 警報解決後可能需要一天的時間才能清除。

.. 前往link:grid-federation-retry-failed-replication.html["識別並重試失敗的複製操作"]識別任何物件或刪除無法複製到另一個網格的標記，並根據需要重試複製。






=== 跨網格複製資源不可用警報

.問題
觸發了「*跨網格複製資源不可用*」警報。

.細節
此警報表示由於資源不可用，跨網格複製請求處於待處理狀態。例如，可能存在網路錯誤。

.建議的操作
. 監視警報以查看問題是否自行解決。
. 如果問題仍然存在，請確定任一網格是否對同一連接有*網格聯合連接失敗*警報或對某個節點有*無法與節點通訊*警報。當您解決這些警報時，此警報可能會解決。
. 要了解有關失敗的更多信息，請參閱link:../monitor/grid-federation-monitor-connections.html["監控電網聯合連接"]查看跨網格複製指標。
. 如果您無法解決警報，請聯絡技術支援。


問題解決後，跨網格複製將正常進行。
