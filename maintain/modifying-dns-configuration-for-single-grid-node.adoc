---
permalink: maintain/modifying-dns-configuration-for-single-grid-node.html 
sidebar: sidebar 
keywords: storagegrid, recover, dns, modify dns 
summary: 您可以執行腳本為每個網格節點配置不同的 DNS，而不是為整個部署全域設定 DNS。 
---
= 修改單一網格節點的DNS配置
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以執行腳本為每個網格節點配置不同的 DNS，而不是為整個部署全域設定 DNS。

一般來說，您應該使用網格管理器上的 *MAINTENANCE* > *Network* > *DNS servers* 選項來設定 DNS 伺服器。僅當您需要為不同的網格節點使用不同的 DNS 伺服器時才使用下列腳本。

.步驟
. 登入主管理節點：
+
.. 輸入以下命令： `ssh admin@_primary_Admin_Node_IP_`
.. 輸入 `Passwords.txt`文件。
.. 輸入以下命令切換到root： `su -`
.. 輸入 `Passwords.txt`文件。
+
當您以 root 身分登入時，提示字元將從 `$`到 `#`。

.. 將 SSH 私鑰新增至 SSH 代理程式。進入： `ssh-add`
.. 輸入 `Passwords.txt`文件。


. [[log_in_to_node]]使用自訂 DNS 配置登入要更新的節點： `ssh _node_IP_address_`
. 執行 DNS 設定腳本： `setup_resolv.rb.`
+
該腳本以支援的命令清單進行回應。

+
[listing]
----
Tool to modify external name servers

available commands:
  add search <domain>
               add a specified domain to search list
               e.g.> add search netapp.com
  remove search <domain>
               remove a specified domain from list
               e.g.> remove search netapp.com
  add nameserver <ip>
               add a specified IP address to the name server list
               e.g.> add nameserver 192.0.2.65
  remove nameserver <ip>
               remove a specified IP address from list
               e.g.> remove nameserver 192.0.2.65
  remove nameserver all
               remove all nameservers from list
  save         write configuration to disk and quit
  abort        quit without saving changes
  help         display this help message


Current list of name servers:
    192.0.2.64
Name servers inherited from global DNS configuration:
    192.0.2.126
    192.0.2.127
Current list of search entries:
    netapp.com

Enter command [`add search <domain>|remove search <domain>|add nameserver <ip>`]
              [`remove nameserver <ip>|remove nameserver all|save|abort|help`]
----
. 新增為您的網路提供網域名稱服務的伺服器的 IPv4 位址： `add <nameserver IP_address>`
. 重複 `add nameserver`命令添加名稱伺服器。
. 根據提示執行其他命令。
. 儲存變更並退出應用程式： `save`
. [[close_cmd_shell]]關閉伺服器上的指令 shell： `exit`
. 對於每個網格節點，重複步驟<<log_in_to_node,登入節點>>透過<<close_cmd_shell,關閉命令外殼>>。
. 當您不再需要無密碼存取其他伺服器時，請從 SSH 代理程式中刪除私鑰。進入： `ssh-add -D`

