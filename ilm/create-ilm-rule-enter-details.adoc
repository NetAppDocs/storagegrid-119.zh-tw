---
permalink: ilm/create-ilm-rule-enter-details.html 
sidebar: sidebar 
keywords: ILM rule step 1, define basics 
summary: 建立 ILM 規則精靈的步驟 1（輸入詳細資料）可讓您輸入規則的名稱和描述並為規則定義篩選器。 
---
= 第 1 步（共 3 步）：輸入詳細信息
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
建立 ILM 規則精靈的 *輸入詳細資料* 步驟可讓您輸入規則的名稱和描述並為規則定義篩選器。

輸入描述和定義規則的過濾器是可選的。

.關於此任務
當根據link:what-ilm-rule-is.html["ILM 規則"]， StorageGRID將物件元資料與規則的過濾器進行比較。如果物件元資料與所有篩選器匹配， StorageGRID將使用該規則來放置該物件。您可以設計一個規則應用於所有對象，也可以指定基本篩選器（例如一個或多個租用戶帳戶或儲存桶名稱）或進階篩選器（例如物件的大小或使用者元資料）。

.步驟
. 在「名稱」欄位中輸​​入規則的唯一名稱。
. 或者，在「*描述*」欄位中輸​​入規則的簡短描述。
+
您應該描述規則的目的或功能，以便以後能夠識別該規則。

. 或者，選擇一個或多個適用此規則的 S3 租用戶帳戶。如果此規則適用於所有租用戶，請將此欄位留空。
+
如果您沒有 Root 存取權限或租用戶帳戶權限，則無法從清單中選擇租用戶。相反，輸入租用戶 ID 或以逗號分隔的字串形式輸入多個 ID。

. 或者，指定此規則適用的 S3 儲存桶。
+
如果選擇「*適用於所有儲存桶*」（預設），則此規則適用於所有 S3 儲存桶。

. 對於 S3 租用戶，可選擇選擇 *是* 將規則僅套用於已啟用版本控制的 S3 儲存桶中的舊物件版本。
+
如果選擇“是”，則自動選擇“非目前時間”作為參考時間link:create-ilm-rule-define-placements.html["建立 ILM 規則精靈的第 2 步"]。

+

NOTE: 非當前時間僅適用於啟用版本控制的儲存桶中的 S3 物件。看link:../s3/operations-on-buckets.html["儲存桶上的操作，PutBucketVersioning"]和link:managing-objects-with-s3-object-lock.html["使用 S3 對象鎖管理對象"]。

+
您可以使用此選項透過篩選非目前物件版本來減少版本化物件的儲存影響。看link:example-4-ilm-rules-and-policy-for-s3-versioned-objects.html["範例 4：S3 版本化物件的 ILM 規則和策略"] 。

. 或者，選擇「新增進階過濾器」來指定其他過濾器。
+
如果您不配置進階篩選，則該規則將套用於所有符合基本篩選器的物件。有關高級過濾的更多信息，請參閱<<在 ILM 規則中使用進階過濾器>>和<<指定多種元資料類型和值>>。

. 選擇*繼續*。link:create-ilm-rule-define-placements.html["步驟 2（定義展示位置）"]出現建立 ILM 規則精靈。




== 在 ILM 規則中使用進階過濾器

進階篩選可讓您根據元資料建立僅適用於特定物件的 ILM 規則。當您為規則設定進階篩選時，您可以選擇要符合的元資料類型、選擇運算子並指定元資料值。評估物件時，ILM 規則僅適用於具有與進階篩選器相符的元資料的物件。

表格顯示了您可以在進階篩選器中指定的元資料類型、您可以對每種元資料類型使用的運算子以及預期的元資料值。

[cols="1a,1a,2a"]
|===
| 元資料類型 | 支援的運算符 | 元資料值 


 a| 
攝取時間
 a| 
* 是
* 不是
* 之前
* 是在或之前
* 之後
* 是在或之後

 a| 
物體被吞食的時間和日期。

*注意：*為了避免在啟動新的 ILM 策略時出現資源問題，您可以在任何可能更改大量現有物件位置的規則中使用攝取時間進階篩選器。將攝取時間設定為大於或等於新政策生效的大致時間，以確保現有物件不會被不必要地移動。



 a| 
鑰匙
 a| 
* 等於
* 不等於
* 包含
* 不包含
* 開始於
* 不是以...開頭
* 結尾為
* 並不以...結束

 a| 
唯一 S3 物件鍵的全部或部分。

例如，您可能想要匹配以 `.txt`或者從 `test-object/`。



 a| 
上次訪問時間
 a| 
* 是
* 不是
* 之前
* 是在或之前
* 之後
* 是在或之後

 a| 
上次檢索（讀取或檢視）物件的時間和日期。

*注意：*如果您計劃link:using-last-access-time-in-ilm-rules.html["使用上次訪問時間"]作為進階過濾器，必須為 S3 儲存桶啟用上次存取時間更新。



 a| 
位置約束（僅限 S3）
 a| 
* 等於
* 不等於

 a| 
建立 S3 儲存桶的區域。使用 *ILM* > *Regions* 來定義顯示的區域。

*注意：* us-east-1 的值將匹配在 us-east-1 區域建立的儲存桶中的物件以及未指定區域的儲存桶中的物件。看link:configuring-regions-optional-and-s3-only.html["配置區域（可選，僅限 S3）"] 。



 a| 
物件大小
 a| 
* 等於
* 不等於
* 少於
* 小於或等於
* 大於
* 大於或等於

 a| 
物體的大小。

擦除編碼最適合大於 1 MB 的物件。不要對小於 200 KB 的物件使用擦除編碼，以避免管理非常小的擦除編碼片段的開銷。



 a| 
用戶元數據
 a| 
* 包含
* 結尾為
* 等於
* 存在
* 開始於
* 不包含
* 並不以...結束
* 不等於
* 不存在
* 不是以...開頭

 a| 
鍵值對，其中 *用戶元資料名稱* 是鍵，*元資料值* 是值。

例如，要篩選具有以下使用者元資料的對象 `color=blue`， 指定 `color`對於*用戶元資料名稱*， `equals`對於操作員來說， `blue`用於*元資料值*。

*注意：*使用者元資料名稱不區分大小寫；使用者元資料值區分大小寫。



 a| 
物件標籤（僅限 S3）
 a| 
* 包含
* 結尾為
* 等於
* 存在
* 開始於
* 不包含
* 並不以...結束
* 不等於
* 不存在
* 不是以...開頭

 a| 
鍵值對，其中*物件標籤名稱*是鍵，*物件標籤值*是值。

例如，要篩選具有物件標籤的對象 `Image=True`， 指定 `Image`對於*物件標籤名稱*， `equals`對於操作員來說， `True`用於*物件標籤值*。

*注意：*物件標籤名稱和物件標籤值區分大小寫。您必須準確地按照物件的定義輸入這些項目。

|===


== 指定多種元資料類型和值

定義進階篩選時，您可以指定多種類型的元資料和多個元資料值。例如，如果您希望規則匹配大小在 10 MB 到 100 MB 之間的對象，則可以選擇 *對像大小* 元資料類型並指定兩個元資料值。

* 第一個元資料值指定大於或等於 10 MB 的物件。
* 第二個元資料值指定小於或等於 100 MB 的物件。


image::../media/advanced_filtering_size_between.png[物件大小的進階過濾範例]

使用多個條目可以讓您精確控制符合的物件。在下列範例中，該規則適用於以品牌 A 或品牌 B 作為 camera_type 使用者元資料的值的物件。不過，該規則僅適用於小於 10 MB 的 B 品牌物件。

image::../media/advanced_filtering_multiple_rows.png[用戶元資料的進階過濾範例]
