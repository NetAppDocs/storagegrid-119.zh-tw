---
permalink: ilm/what-ilm-rule-is.html 
sidebar: sidebar 
keywords: what is information lifecycle rule, ilm rule 
summary: 為了管理對象，您可以建立一組資訊生命週期管理（ILM）規則並將它們組織成 ILM 策略。 
---
= 使用 ILM 規則管理對象
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
為了管理對象，您可以建立一組資訊生命週期管理 (ILM) 規則並將它們組織成 ILM 策略。

系統所接收的每個物件都會根據活動策略進行評估。當策略中的規則與物件的元資料相符時，規則中的指令將決定StorageGRID採取什麼動作來複製和儲存該物件。


NOTE: 物件元資料不受 ILM 規則管理。相反，物件元資料儲存在 Cassandra 資料庫中，即所謂的元資料儲存。每個站點都會自動維護三個物件元資料副本，以防止資料遺失。



== ILM 規則的要素

ILM 規則包含三個要素：

* *過濾標準*：規則的基本和進階過濾器定義該規則適用於哪些物件。如果物件與所有篩選器匹配， StorageGRID將套用該規則並建立規則的放置說明中指定的物件副本。
* *放置說明*：規則的放置說明定義物件副本的數量、類型和位置。每條規則可以包含一系列放置指令，以便隨著時間的推移改變物件副本的數量、類型和位置。當一個安置的時間段到期時，下一個安置中的指示將在下一次 ILM 評估中自動應用。
* *攝取行為*：規則的攝取行為可讓您選擇在攝取規則過濾的物件時如何保護它們（當 S3 用戶端將物件儲存到網格時）。




== ILM 規則過濾

建立 ILM 規則時，您可以指定篩選器來確定該規則適用於哪些物件。

在最簡單的情況下，規則可能不會使用任何過濾器。任何不使用過濾器的規則都適用於所有對象，因此它必須是 ILM 策略中的最後一條（預設）規則。預設規則為與另一個規則中的篩選器不符的物件提供儲存說明。

* 基本篩選器可讓您將不同的規則套用至大量不同的物件群組。這些篩選器可讓您將規則套用至特定租用戶帳戶、特定 S3 儲存桶或兩者。
+
基本過濾器為您提供了一種將不同的規則應用於大量物件的簡單方法。例如，可能需要儲存公司的財務記錄以滿足監管要求，而可能需要儲存行銷部門的資料以促進日常營運。為每個部門建立單獨的租用戶帳戶或將不同部門的資料分開到單獨的 S3 儲存桶後，您可以輕鬆建立一條適用於所有財務記錄的規則和一條適用於所有行銷資料的規則。

* 高級過濾器可讓您進行精細控制。您可以建立篩選器來根據下列物件屬性選擇物件：
+
** 攝取時間
** 上次訪問時間
** 全部或部分物件名稱（Key）
** 位置約束（僅限 S3）
** 物件大小
** 用戶元數據
** 物件標籤（僅限 S3）




您可以根據非常具體的標準過濾物件。例如，醫院影像部門儲存的物件在 30 天內可能會頻繁使用，之後則很少使用，而包含病患就診資訊的物件可能需要複製到醫療網路總部的計費部門。您可以建立篩選器，根據對象名稱、大小、S3 對象標籤或任何其他相關標準來識別每種類型的對象，然後建立單獨的規則來適當地儲存每組對象。

您可以根據需要在單一規則中組合過濾器。例如，行銷部門可能希望以不同於供應商記錄的方式儲存大型影像文件，而人力資源部門可能需要集中儲存特定地理位置的人事記錄和政策資訊。在這種情況下，您可以建立按租用戶帳戶篩選的規則來分離每個部門的記錄，同時使用每個規則中的篩選器來識別該規則適用的特定類型的物件。



== ILM 規則放置說明

放置指令決定物件資料的儲存位置、時間和方式。一個 ILM 規則可以包含一個或多個放置指令。每個安置指示適用於一個時間段。

建立放置說明時：

* 首先指定參考時間，該時間決定了放置指令何時開始。參考時間可能是物件被攝取的時間、物件被存取的時間、版本化物件變成非目前時間或使用者定義的時間。
* 接下來，您要指定相對於參考時間的放置應用時間。例如，放置可能從第 0 天開始並持續 365 天，相對於物件被攝取的時間而言。
* 最後，指定副本的類型（複製或擦除編碼）以及副本的儲存位置。例如，您可能希望在兩個不同的網站上儲存兩個副本。


每個規則可以為單一時間段定義多個展示位置，也可以為不同的時間段定義不同的展示位置。

* 若要在單一時間段內將物件放置在多個位置，請選擇*新增其他類型或位置*以為該時間段新增多條線路。
* 若要將物件放置在不同時間段的不同位置，請選擇*新增另一個時間段*以新增下一個時段。然後，指定該時間段內的一行或多行。


此範例顯示了建立 ILM 規則精靈的定義放置頁面上的兩個放置說明。

image::../media/ilm_rule_multiple_placements_in_single_time_period.png[網格管理器中的 ILM 放置螢幕]

第一個安置指令image:../media/icon_number_1.png["圖示編號 1"]第一年有兩行：

* 第一行在兩個資料中心站點建立兩個複製的物件副本。
* 第二行使用所有資料中心網站建立 6+3 擦除編碼副本。


第二次安置指導image:../media/icon_number_2.png["圖示編號 1"]一年後創建兩個副本並永久保存這些副本。

當您為規則定義放置指令集時，必須確保至少有一條放置指令從第 0 天開始，您定義的時間段之間沒有間隙，並且最終放置指令永遠持續或直到您不再需要任何物件副本。

當規則中的每個時間段到期時，將套用下一個時間段的內容放置指令。建立新的物件副本並刪除任何不需要的副本。



== ILM 規則攝取行為

攝取行為控制是否根據規則中的說明立即放置物件副本，或是否製作臨時副本並稍後套用放置說明。以下攝取行為適用於 ILM 規則：

* *平衡*： StorageGRID嘗試在攝取時製作 ILM 規則中指定的所有副本；如果不可能，則製作臨時副本並將成功返回給客戶端。在可能的情況下，將進行 ILM 規則中指定的複製。
* *嚴格*：在向客戶端返回成功之前，必須完成 ILM 規則中指定的所有複製。
* *雙重提交*： StorageGRID立即製作物件的臨時副本並將成功傳回給客戶端。在可能的情況下，將製作 ILM 規則中指定的副本。


.相關資訊
* link:data-protection-options-for-ingest.html["收錄選項"]
* link:advantages-disadvantages-of-ingest-options.html["攝取選項的優點、缺點和局限性"]
* link:../s3/consistency-controls.html#how-consistency-controls-and-ILM-rules-interact["一致性和 ILM 規則如何相互作用以影響資料保護"]




== ILM 規則範例

例如，ILM 規則可以指定以下內容：

* 僅適用於屬於租戶 A 的對象。
* 製作這些物件的兩個副本，並將每個副本儲存在不同的網站。
* 「永久」保留這兩個副本，這意味著StorageGRID不會自動刪除它們。相反， StorageGRID將保留這些對象，直到它們被客戶端刪除請求或儲存桶生命週期到期刪除。
* 使用平衡選項進行攝取行為：一旦租用戶 A 將物件儲存到StorageGRID，就會套用雙站點放置指令，除非無法立即製作兩個所需的副本。
+
例如，如果租戶 A 保存物件時站點 2 無法訪問，則StorageGRID將在站點 1 的儲存節點上製作兩個臨時副本。一旦站點 2 可用， StorageGRID將在該站點製作所需的副本。



.相關資訊
* link:what-storage-pool-is.html["什麼是儲存池"]
* link:what-cloud-storage-pool-is.html["什麼是雲端儲存池"]

