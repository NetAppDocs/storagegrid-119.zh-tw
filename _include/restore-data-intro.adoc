= 我應該使用哪種程式？
:allow-uri-read: 




== 我應該使用哪種程式？

只要有可能，就使用網格管理器中的*體積恢復*頁面恢復物件資料。

* 如果磁碟區列在 *維護* > *磁碟區復原* > *要復原的節點* 中，請使用link:../maintain/restoring-volume.html["網格管理器中的磁碟區復原頁面"]。
* 如果磁碟區未在「*維護* > *磁碟區復原* > *要復原的節點*」中列出，請依照下列步驟使用 `repair-data`腳本來恢復對象資料。
+
如果復原的儲存節點包含的磁碟區少於它所替換的節點，則必須使用 `repair-data`腳本。




NOTE: 修復資料腳本已棄用，並將在未來版本中刪除。如果可能，請使用link:../maintain/restoring-volume.html["網格管理器中的磁碟區復原流程"]。



== 使用 `repair-data`恢復物件資料的腳本

.開始之前
* 您已確認復原的儲存節點的連線狀態為*已連線*image:../media/icon_alert_green_checkmark.png["圖示警報綠色複選標記"]在網格管理器中的 *NODES* > *Overview* 標籤上。


.關於此任務
假設網格的 ILM 規則已配置為可以使用物件副本，則可以從其他儲存節點或雲端儲存池還原物件資料。

請注意以下事項：

* 如果 ILM 規則配置為僅儲存複製副本，且該副本存在於發生故障的儲存磁碟區上，則您將無法復原該物件。
* 如果物件的唯一剩餘副本位於雲端儲存池中，StorageGRID必須向雲端儲存池端點發出多個請求來還原物件資料。在執行此過程之前，請聯絡技術支援以取得協助，以估計恢復時間範圍和相關成本。




== 關於 `repair-data`腳本

若要恢復對象數據，請運行 `repair-data`腳本。此腳本開始復原物件資料的過程並與 ILM 掃描配合使用以確保滿足 ILM 規則。

選擇下面的*複製資料*或*擦除編碼 (EC) 資料*來了解不同的選項 `repair-data`腳本，取決於您要恢復複製的資料還是擦除編碼的資料。如果需要恢復兩種類型的數據，則必須執行兩組命令。


NOTE: 有關 `repair-data`腳本，輸入 `repair-data --help`從主管理節點的命令列。


NOTE: 修復資料腳本已棄用，並將在未來版本中刪除。如果可能，請使用link:../maintain/restoring-volume.html["網格管理器中的磁碟區復原流程"]。

[role="tabbed-block"]
====
.複製數據
--
根據您是否需要修復整個節點或僅修復節點上的某些卷，有兩個命令可用於恢復複製的資料：

`repair-data start-replicated-node-repair`

`repair-data start-replicated-volume-repair`

您可以使用以下命令追蹤複製資料的修復：

`repair-data show-replicated-repair-status`

--
.清除編碼 (EC) 數據
--
根據您是否需要修復整個節點或僅修復節點上的某些卷，有兩個命令可用於恢復擦除編碼資料：

`repair-data start-ec-node-repair`

`repair-data start-ec-volume-repair`

您可以使用以下命令追蹤擦除編碼資料的修復：

`repair-data show-ec-repair-status`


NOTE: 當某些儲存節點處於離線狀態時，可以開始修復擦除編碼資料。然而，如果無法解釋所有擦除編碼數據，則無法完成修復。所有節點可用後修復將完成。


NOTE: EC修復工作暫時預留了大量儲存空間。儲存警報可能會被觸發，但修復完成後就會解決。如果沒有足夠的儲存空間用於預留，EC 修復作業將會失敗。無論 EC 修復作業失敗或成功，儲存預留都會在作業完成時釋放。

--
====