---
permalink: fabricpool/use-fabricpool-setup-wizard-steps.html 
sidebar: sidebar 
keywords: fabricPool, FabricPool setup wizard, ontap system manager 
summary: 您可以使用FabricPool設定精靈將StorageGRID配置為FabricPool雲層的物件儲存系統。 
---
= 存取並完成FabricPool設定精靈
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用FabricPool設定精靈將StorageGRID配置為FabricPool雲層的物件儲存系統。

.開始之前
* 您已審閱link:../fabricpool/use-fabricpool-setup-wizard.html["注意事項和要求"]使用FabricPool設定精靈。
+

NOTE: 如果要設定StorageGRID以用於任何其他 S3 用戶端應用程序，請前往link:../admin/use-s3-setup-wizard.html["使用 S3 設定精靈"]。

* 你有link:../admin/admin-group-permissions.html["Root存取權限"]。




== 訪問嚮導

您可以在開始使用StorageGRID Grid Manager 時完成FabricPool設定精靈，也可以在以後的任何時間存取並完成該精靈。

.步驟
. Sign inlink:../admin/web-browser-requirements.html["支援的網頁瀏覽器"]。
. 如果儀表板上出現 * FabricPool和 S3 設定精靈* 橫幅，請選擇橫幅中的連結。如果橫幅不再出現，請從網格管理器的標題列中選擇幫助圖標，然後選擇* FabricPool和 S3 設定精靈*。
+
image::../media/help_menu.png[幫助菜單]

. 在FabricPool和 S3 設定精靈頁面的FabricPool部分中，選擇 *立即配置*。
+
出現*第 1 步（共 9 步）：配置 HA 組*。





== 步驟 1（共 9 步）：配置 HA 組

高可用性 (HA) 群組是每個包含StorageGRID負載平衡器服務的節點集合。  HA 群組可以包含網關節點、管理節點或兩者。

您可以使用 HA 群組來幫助保持FabricPool資料連接可用。 HA 群組使用虛擬 IP 位址 (VIP) 來提供對負載平衡器服務的高度可用存取。如果 HA 群組中的活動介面發生故障，則備用介面可以管理工作負載，而不會對FabricPool操作產生太大影響

有關此任務的詳細信息，請參閱link:../admin/managing-high-availability-groups.html["管理高可用性組"]和link:best-practices-for-high-availability-groups.html["高可用性組的最佳實踐"]。

.步驟
. 如果您打算使用外部負載平衡器，則無需建立 HA 群組。選擇“跳過此步驟”並前往<<步驟 2（共 9 步）：設定負載平衡器端點>>。
. 若要使用StorageGRID負載平衡器，請建立新的 HA 群組或使用現有的 HA 群組。
+
[role="tabbed-block"]
====
.建立 HA 組
--
.. 若要建立新的 HA 群組，請選擇*建立 HA 組*。
.. 對於*輸入詳細資料*步驟，請填寫以下欄位。
+
[cols="1a,3a"]
|===
| 場地 | 描述 


 a| 
HA組名稱
 a| 
此 HA 組的唯一顯示名稱。



 a| 
描述（可選）
 a| 
該 HA 組的描述。

|===
.. 對於*新增介面*步驟，選擇您想要在此 HA 群組中使用的節點介面。
+
使用列標題對行進行排序，或輸入搜尋字詞以更快找到介面。

+
您可以選擇一個或多個節點，但每個節點只能選擇一個介面。

.. 對於*優先考慮介面*步驟，請確定此 HA 群組的主介面和任何備份介面。
+
拖曳行來變更「優先順序」列中的值。

+
清單中的第一個介面是主介面。除非發生故障，否則主介面是活動介面。

+
如果 HA 群組包含多個介面且活動介面發生故障，則虛擬 IP (VIP) 位址將依優先順序移至第一個備份介面。如果該接口發生故障，VIP 位址將移動到下一個備份接口，依此類推。當故障解決後，VIP 位址將移回可用的最高優先權介面。

.. 對於*輸入 IP 位址*步驟，請填寫以下欄位。
+
[cols="1a,3a"]
|===
| 場地 | 描述 


 a| 
子網路 CIDR
 a| 
CIDR 表示法中的 VIP 子網路位址－IPv4 位址後面接著斜槓和子網路長度（0-32）。

網路位址不得設定任何主機位元。例如，  `192.16.0.0/22` 。



 a| 
網關 IP 位址（可選）
 a| 
選修的。如果用於存取StorageGRID 的ONTAP IP 位址與StorageGRID VIP 位址不在同一子網路中，請輸入StorageGRID VIP 本地閘道 IP 位址。本機網關IP位址必須在VIP子網路內。



 a| 
虛擬 IP 位址
 a| 
為 HA 組中的活動介面輸入至少一個、最多十個 VIP 位址。所有 VIP 位址都必須位於 VIP 子網路內，並且所有 VIP 位址都將在活動介面上同時處於活動狀態。

至少一個位址必須是 IPv4。您也可以選擇指定其他 IPv4 和 IPv6 位址。

|===
.. 選擇“建立 HA 群組”，然後選擇“完成”返回FabricPool設定精靈。
.. 選擇“*繼續*”進入負載平衡器步驟。


--
.使用現有的 HA 組
--
.. 若要使用現有的 HA 群組，請從*選擇 HA 群組*下拉清單中選擇 HA 組名稱。
.. 選擇“*繼續*”進入負載平衡器步驟。


--
====




== 步驟 2（共 9 步）：設定負載平衡器端點

StorageGRID使用負載平衡器來管理來自用戶端應用程式（例如FabricPool）的工作負載。負載平衡可最大限度地提高多個儲存節點的速度和連接容量。

您可以使用所有閘道器和管理節點上存在的StorageGRID負載平衡器服務，也可以連接到外部（第三方）負載平衡器。建議使用StorageGRID負載平衡器。

有關此任務的詳細信息，請參閱常規link:../admin/managing-load-balancing.html["負載平衡的注意事項"]以及link:best-practices-for-load-balancing.html["FabricPool負載平衡的最佳實踐"]。

.步驟
. 選擇或建立StorageGRID負載平衡器端點或使用外部負載平衡器。
+
[role="tabbed-block"]
====
.建立端點
--
.. 選擇*建立端點*。
.. 對於*輸入端點詳細資料*步驟，請填寫以下欄位。
+
[cols="1a,3a"]
|===
| 場地 | 描述 


 a| 
Name
 a| 
端點的描述性名稱。



 a| 
港口
 a| 
您想要用於負載平衡的StorageGRID連接埠。對於您建立的第一個端點，此欄位預設為 10433，但您可以輸入任何未使用的外部連接埠。如果輸入 80 或 443，則端點僅在網關節點上配置，因為這些連接埠在管理節點上保留。

*注意：*不允許使用其他網格服務使用的連接埠。查看link:../network/internal-grid-node-communications.html["網路連接埠參考"]。



 a| 
客戶端類型
 a| 
必須是*S3*。



 a| 
網路協定
 a| 
選擇 *HTTPS*。

*注意*：支援但不建議使用沒有 TLS 加密的StorageGRID進行通訊。

|===
.. 對於*選擇綁定模式*步驟，指定綁定模式。綁定模式控制如何使用任意 IP 位址或使用特定 IP 位址和網路介面存取端點。
+
[cols="1a,3a"]
|===
| 模式 | 描述 


 a| 
全域（預設）
 a| 
用戶端可以使用任何網關節點或管理節點的 IP 位址、任何網路上任何 HA 群組的虛擬 IP (VIP) 位址或對應的 FQDN 存取端點。

除非您需要限制此端點的可存取性，否則請使用*全域*設定（預設）。



 a| 
HA 群組的虛擬 IP
 a| 
用戶端必須使用 HA 群組的虛擬 IP 位址（或對應的 FQDN）來存取此端點。

具有此綁定模式的端點都可以使用相同的連接埠號，只要您為端點選擇的 HA 群組不重疊。



 a| 
節點介面
 a| 
用戶端必須使用選定節點介面的 IP 位址（或對應的 FQDN）來存取此端點。



 a| 
節點類型
 a| 
根據您選擇的節點類型，用戶端必須使用任何管理節點的 IP 位址（或對應的 FQDN）或任何網關節點的 IP 位址（或對應的 FQDN）來存取此端點。

|===
.. 對於「租戶存取」步驟，選擇以下選項之一：
+
[cols="1a,3a"]
|===
| 場地 | 描述 


 a| 
允許所有租戶（預設）
 a| 
所有租用戶帳戶都可以使用此端點存取他們的儲存桶。

*允許所有租用戶*幾乎始終是用於FabricPool的負載平衡器端點的適當選項。

如果您正在使用FabricPool設定精靈來安裝新的StorageGRID系統且尚未建立任何租用戶帳戶，則必須選擇此選項。



 a| 
允許選定的租戶
 a| 
只有選定的租用戶帳戶可以使用此端點存取他們的儲存桶。



 a| 
阻止選定的租戶
 a| 
選定的租用戶帳戶不能使用此端點存取其儲存桶。所有其他租戶都可以使用此端點。

|===
.. 對於*附加憑證*步驟，選擇以下之一：
+
[cols="1a,3a"]
|===
| 場地 | 描述 


 a| 
上傳證書（推薦）
 a| 
使用此選項上傳 CA 簽署的伺服器憑證、憑證私鑰和可選的 CA 套件。



 a| 
產生證書
 a| 
使用此選項產生自簽名憑證。看link:../admin/configuring-load-balancer-endpoints.html["配置負載平衡器端點"]了解輸入內容的詳細資訊。



 a| 
使用StorageGRID S3 證書
 a| 
只有當您已上傳或產生StorageGRID全域憑證的自訂版本時，此選項才可用。看link:../admin/configuring-custom-server-certificate-for-storage-node.html["配置 S3 API 證書"]了解詳情。

|===
.. 選擇“*完成*”返回FabricPool設定精靈。
.. 選擇“*繼續*”進入租戶和儲存桶步驟。



NOTE: 端點憑證的變更可能需要長達 15 分鐘才能套用到所有節點。

--
.使用現有的負載平衡器端點
--
.. 從「選擇負載平衡器端點」下拉清單中選擇現有端點的名稱。
.. 選擇“*繼續*”進入租戶和儲存桶步驟。


--
.使用外部負載平衡器
--
.. 填寫外部負載平衡器的以下欄位。
+
[cols="1a,3a"]
|===
| 場地 | 描述 


 a| 
完全限定域名 (FQDN)
 a| 
外部負載平衡器的完全限定網域名稱 (FQDN)。



 a| 
港口
 a| 
FabricPool將用於連接外部負載平衡器的連接埠號碼。



 a| 
證書
 a| 
複製外部負載平衡器的伺服器憑證並將其貼上到此欄位中。

|===
.. 選擇“*繼續*”進入租戶和儲存桶步驟。


--
====




== 第 3 步（共 9 步）：租戶和儲存桶

租用戶是可以使用 S3 應用程式在StorageGRID中儲存和擷取物件的實體。每個租戶都有自己的使用者、存取金鑰、儲存桶、物件和一組特定的功能。您必須先建立StorageGRID租用戶，然後才能建立FabricPool將使用的儲存桶。

bucket 是用於儲存租用戶的物件和物件元資料的容器。儘管某些租戶可能有許多儲存桶，但精靈允許您一次只建立或選擇一個租用戶和一個儲存桶。您可以稍後使用租用戶管理器來新增所需的任何其他儲存桶。

您可以為FabricPool使用建立一個新的租用戶和儲存桶，也可以選擇一個現有的租用戶和儲存桶。如果您建立新的租用戶，系統會自動為租用戶的根用戶建立存取金鑰 ID 和秘密存取金鑰。

有關此任務的詳細信息，請參閱link:creating-tenant-account-for-fabricpool.html["為FabricPool建立租用戶帳戶"]和link:creating-s3-bucket-and-access-key.html["建立 S3 儲存桶並取得存取金鑰"]。

.步驟
建立新的租戶和儲存桶或選擇現有租戶。

[role="tabbed-block"]
====
.新租戶和儲存桶
--
. 若要建立新的租用戶和儲存桶，請輸入*租用戶名稱*。例如，  `FabricPool tenant` 。
. 根據您的StorageGRID系統是否使用，定義租用​​戶帳戶的根存取權限link:../admin/using-identity-federation.html["身分聯合"]，link:../admin/configuring-sso.html["單一登入（SSO）"] ，或兩者兼而有之。
+
[cols="1a,3a"]
|===
| 選項 | 執行此操作 


 a| 
如果未啟用身份聯合
 a| 
指定以本機 root 使用者身分登入租用戶時所使用的密碼。



 a| 
如果啟用了身份聯合
 a| 
.. 選擇一個現有的聯合群組，為租用戶提供 Root 存取權限。
.. 或者，指定以本機 root 使用者身分登入租用戶時所使用的密碼。




 a| 
如果同時啟用身份聯合和單一登入 (SSO)
 a| 
選擇一個現有的聯合群組，為租用戶提供 Root 存取權限。沒有本地用戶可以登入。

|===
. 對於 *Bucket name*，輸入FabricPool將用於儲存ONTAP資料的儲存桶的名稱。例如，  `fabricpool-bucket` 。
+

TIP: 建立儲存桶後，您無法變更儲存桶名稱。

. 選擇此儲存桶的*區域*。
+
使用預設區域(`us-east-1`) 除非您期望將來使用 ILM 根據儲存桶的區域過濾物件。

. 選擇「建立並繼續」以建立租用戶和儲存桶，然後前往下載資料步驟


--
.選擇租戶和儲存桶
--
現有租用戶帳戶必須至少有一個未啟用版本控制的儲存桶。如果不存在適合該租用戶的儲存桶，則您無法選擇現有租用戶帳戶。

. 從「租戶名稱」下拉清單中選擇現有租戶。
. 從「儲存桶名稱」下拉清單中選擇現有的儲存桶。
+
FabricPool不支援物件版本控制，因此不會顯示啟用了版本控制的儲存桶。

+

NOTE: 不要選擇已啟用 S3 物件鎖以與FabricPool一起使用的儲存桶。

. 選擇*繼續*進入下載資料步驟。


--
====


== 步驟 4（共 9 步）：下載ONTAP設置

在此步驟中，您將下載一個文件，可以使用該文件將值輸入ONTAP系統管理員。

.步驟
. 或者，選擇複製圖示 (image:../media/icon_tenant_copy_url.png["複製圖示"] ) 將存取金鑰 ID 和秘密存取金鑰複製到剪貼簿。
+
這些值包含在下載檔案中，但您可能想要單獨保存它們。

. 選擇“下載ONTAP設定”以下載包含您迄今為止輸入的值的文字檔案。
+
這 `ONTAP_FabricPool_settings___bucketname__.txt`文件包含將StorageGRID配置為FabricPool雲層的物件儲存系統所需的信息，包括：

+
** 負載平衡器連接詳細信息，包括伺服器名稱 (FQDN)、連接埠和證書
** 儲存桶名稱
** 租用戶帳戶的根用戶的存取金鑰 ID 和秘密存取金鑰


. 將複製的金鑰和下載的檔案儲存到安全的位置。
+

CAUTION: 在複製兩個存取金鑰、下載ONTAP設定或兩者之前，請勿關閉此頁面。關閉此頁面後，密鑰將不可用。確保將此資訊保存在安全的位置，因為它可用於從StorageGRID系統取得資料。

. 勾選方塊以確認您已下載或複製存取金鑰 ID 和秘密存取金鑰。
. 選擇“*繼續*”進入 ILM 儲存池步驟。




== 第 5 步（共 9 步）：選擇儲存池

儲存池是一組儲存節點。當您選擇儲存池時，您可以確定StorageGRID將使用哪些節點來儲存從ONTAP分層的資料。

有關此步驟的詳細信息，請參閱link:../ilm/creating-storage-pool.html["建立儲存池"]。

.步驟
. 從「*站點*」下拉清單中，選擇要用於ONTAP分層資料的StorageGRID站點。
. 從*儲存池*下拉清單中，選擇該網站的儲存池。
+
站點的儲存池包括該站點的所有儲存節點。

. 選擇「*繼續*」進入 ILM 規則步驟。




== 第 6 步（共 9 步）：查看FabricPool的 ILM 規則

資訊生命週期管理 (ILM) 規則控制StorageGRID系統中所有物件的放置、持續時間和攝取行為。

FabricPool設定精靈會自動建立供FabricPool使用的建議 ILM 規則。此規則僅適用於您指定的儲存桶。它在單一網站上使用 2+1 擦除編碼來儲存從ONTAP分層的資料。

有關此步驟的詳細信息，請參閱link:../ilm/access-create-ilm-rule-wizard.html["建立 ILM 規則"]和link:best-practices-ilm.html["將 ILM 與FabricPool資料結合使用的最佳實踐"]。

.步驟
. 查看規則詳細資訊。
+
[cols="1a,3a"]
|===
| 場地 | 描述 


 a| 
規則名稱
 a| 
自動生成且無法更改



 a| 
描述
 a| 
自動生成且無法更改



 a| 
篩選
 a| 
儲存桶名稱

此規則僅適用於儲存在您指定的儲存桶中的物件。



 a| 
參考時間
 a| 
攝取時間

當物件最初保存到儲存桶時，放置指令就開始了。



 a| 
安置指導
 a| 
使用 2+1 擦除編碼

|===
. 將保留圖依*時間段*和*儲存池*排序，以確認放置指令。
+
** 此規則的*時間段*是*第 0 天 - 永遠*。  *第 0 天* 表示當資料從ONTAP分層時套用此規則。  *永遠* 意味著StorageGRID ILM 不會刪除已從ONTAP分層的資料。
** 此規則的*儲存池*是您選擇的儲存池。 *EC 2+1* 表示資料將使用 2+1 擦除編碼儲存。每個物件將保存為兩個資料片段和一個奇偶校驗片段。每個物件的三個片段將保存到單一站點的不同儲存節點。


. 選擇*建立並繼續*來建立此規則並前往 ILM 策略步驟。




== 步驟 7（共 9 步）：檢視並啟動 ILM 策略

FabricPool設定精靈為FabricPool建立 ILM 規則後，它會建立一個 ILM 策略。在啟動此策略之前，您必須仔細模擬並審查此策略。

有關此步驟的詳細信息，請參閱link:../ilm/creating-ilm-policy.html["建立 ILM 策略"]和link:best-practices-ilm.html["將 ILM 與FabricPool資料結合使用的最佳實踐"]。


CAUTION: 當您啟動新的 ILM 策略時， StorageGRID會使用該策略來管理網格中所有物件（包括現有物件和新攝取的物件）的放置、持續時間和資料保護。在某些情況下，啟動新策略可能會導致現有物件移動到新位置。


CAUTION: 為避免資料遺失，請勿使用將過期或刪除FabricPool雲層資料的 ILM 規則。將保留期設為*永久*，以確保FabricPool物件不會被StorageGRID ILM 刪除。

.步驟
. 或者，更新系統產生的*策略名稱*。預設情況下，系統會在活動或非活動策略的名稱後面附加“+ FabricPool”，但您可以提供自己的名稱。
. 查看非活動策略中的規則清單。
+
** 如果您的網格沒有非活動的 ILM 策略，精靈將透過複製您的活動策略並將新規則新增至頂部來建立非活動策略。
** 如果您的網格已經有一個非活動的 ILM 策略，並且該策略使用與活動 ILM 策略相同的規則和順序，則精靈會將新規則新增至非活動策略的頂部。
** 如果您的非活動策略包含與活動策略不同的規則或不同的順序，則精靈將透過複製活動策略並將新規則新增至頂部來建立新的非活動策略。


. 檢查新的非活動策略中的規則順序。
+
由於FabricPool規則是第一條規則，因此FabricPool儲存桶中的任何物件都會被放置在策略中的其他規則評估之前。任何其他儲存桶中的物件均按照策略中的後續規則放置。

. 查看保留圖以了解如何保留不同的物件。
+
.. 選擇「展開全部」以查看非活動策略中每個規則的保留圖。
.. 選擇*時間段*和*儲存池*來查看保留圖。確認適用於FabricPool儲存桶或租戶的任何規則都*永久*保留物件。


. 當您查看了非活動策略後，選擇*啟動並繼續*以啟動該策略並前往流量分類步驟。



CAUTION: ILM 策略中的錯誤可能會導致無法挽回的資料遺失。激活前請仔細查看政策。



== 第 8 步（共 9 步）：建立流量分類策略

作為一種選擇， FabricPool設定精靈可以建立一個流量分類策略，您可以使用該策略來監控FabricPool工作負載。系統建立的策略使用符合規則來識別與您建立的儲存桶相關的所有網路流量。此策略僅監控流量；它不限制FabricPool或任何其他客戶端的流量。

有關此步驟的詳細信息，請參閱link:creating-traffic-classification-policy-for-fabricpool.html["為FabricPool建立流量分類策略"]。

.步驟
. 審查該政策。
. 如果要建立此流量分類策略，請選擇*建立並繼續*。
+
一旦FabricPool開始將資料分層到StorageGRID，您就可以前往「流量分類策略」頁面查看此策略的網路流量指標。之後，您還可以新增規則來限制其他工作負載，並確保FabricPool工作負載擁有大部分頻寬。

. 否則，選擇*跳過此步驟*。




== 第 9 步（共 9 步）：審核摘要

摘要提供有關您配置的項目的詳細信息，包括負載平衡器、租戶和儲存桶的名稱、流量分類策略以及活動的 ILM 策略。

.步驟
. 查看摘要。
. 選擇*完成*。




== 後續步驟Next steps

完成FabricPool精靈後，執行下列附加步驟。

.步驟
. 前往link:configure-ontap.html["配置ONTAP系統管理器"]輸入已儲存的值並完成ONTAP端的連線。您必須將StorageGRID新增為雲層，將雲層附加到本機層以建立FabricPool，並設定磁碟區分層策略。
. 前往link:configure-dns-server.html["配置 DNS 伺服器"]並確保 DNS 包含一筆記錄，以將StorageGRID伺服器名稱（完全限定網域名稱）與您將使用的每個StorageGRID IP 位址關聯。
. 前往link:other-best-practices-for-storagegrid-and-fabricpool.html["StorageGRID和FabricPool的其他最佳實踐"]了解StorageGRID稽核日誌和其他全域設定選項的最佳實務。

