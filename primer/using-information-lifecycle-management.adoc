---
permalink: primer/using-information-lifecycle-management.html 
sidebar: sidebar 
keywords: what is information lifecycle management, how to use ilm 
summary: '您可以使用資訊生命週期管理 (ILM) 來控制StorageGRID系統中所有物件的放置、持續時間和攝取行為。ILM 規則決定了StorageGRID如何隨時間儲存物件。您可以設定一個或多個 ILM 規則，然後將它們新增至 ILM 策略。' 
---
= 資訊生命週期管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用資訊生命週期管理 (ILM) 來控制StorageGRID系統中所有物件的放置、持續時間和攝取行為。ILM 規則決定了StorageGRID如何隨時間儲存物件。您可以設定一個或多個 ILM 規則，然後將它們新增至 ILM 策略。一個網格可以同時具有多個活動策略。

ILM 規則定義：

* 應該儲存哪些物件。規則可以套用到所有對象，或者您可以指定篩選器來確定規則適用於哪些對象。例如，規則只能套用於與某些租用戶帳戶、特定 S3 儲存桶或 Swift 容器或特定元資料值相關聯的物件。
* 儲存類型和位置。物件可以儲存在儲存節點或雲端儲存池中。
* 所複製的物件類型。副本可以被複製或擦除編碼。
* 對於複製的副本，表示所製作的副本數量。
* 對於擦除編碼副本，使用擦除編碼方案。
* 物件的儲存位置和副本類型隨時間的變化。
* 當物件被納入網格（同步放置或雙重提交）時，如何保護物件資料。


請注意，物件元資料不受 ILM 規則管理。相反，物件元資料儲存在 Cassandra 資料庫中，即所謂的元資料儲存。每個站點都會自動維護三個物件元資料副本，以防止資料遺失。



== ILM 規則範例

例如，ILM 規則可以指定以下內容：

* 僅適用於屬於租戶 A 的對象。
* 製作這些物件的兩個副本，並將每個副本儲存在不同的網站。
* 「永久」保留這兩個副本，這意味著StorageGRID不會自動刪除它們。相反， StorageGRID將保留這些對象，直到它們被客戶端刪除請求或儲存桶生命週期到期刪除。
* 使用平衡選項進行攝取行為：一旦租用戶 A 將物件儲存到StorageGRID，就會套用雙站點放置指令，除非無法立即製作兩個所需的副本。
+
例如，如果租戶 A 保存物件時站點 2 無法訪問，則StorageGRID將在站點 1 的儲存節點上製作兩個臨時副本。一旦站點 2 可用， StorageGRID將在該站點製作所需的副本。





== ILM 策略如何評估對象

StorageGRID系統的活動 ILM 策略控制所有物件的放置、持續時間和攝取行為。

當用戶端將物件儲存到StorageGRID時，將根據活動策略中的有序 ILM 規則集對物件進行評估，如下所示：

. 如果策略中第一個規則的篩選器與某個物件匹配，則該物件將根據該規則的攝取行為進行攝取，並根據該規則的放置說明進行儲存。
. 如果第一條規則的篩選器與物件不匹配，則根據策略中的每個後續規則評估該對象，直到匹配為止。
. 如果沒有規則與物件匹配，則套用策略中預設規則的攝取行為和放置說明。預設規則是策略中的最後一條規則，不能使用任何過濾器。它必須適用於所有租用戶、所有儲存桶和所有物件版本。




== ILM 策略範例

例如，ILM 策略可能包含三個 ILM 規則，指定以下內容：

* *規則 1：為租用戶 A 複製副本*
+
** 符合屬於租戶 A 的所有物件。
** 將這些物件作為三個副本儲存在三個站點。
** 屬於其他租戶的物件不符合規則 1，因此根據規則 2 對它們進行評估。


* 規則 2：對大於 1 MB 的物件進行擦除編碼
+
** 匹配來自其他租戶的所有對象，但前提是它們大於 1 MB。這些較大的物件使用 6+3 擦除編碼儲存在三個站點。
** 與 1 MB 或更小的物件不匹配，因此這些物件根據規則 3 進行評估。


* *規則 3：2 個副本 2 個資料中心*（預設）
+
** 是策略中的最後一條規則，也是預設規則。不使用過濾器。
** 對不符合規則 1 或規則 2 的所有物件（不屬於租戶 A 且大小為 1 MB 或更小的物件）製作兩個副本。




image::../media/ilm_policy_and_rules.png[ILM 政策和規則]

.相關資訊
* link:../ilm/index.html["使用 ILM 管理對象"]

