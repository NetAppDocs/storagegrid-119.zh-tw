---
permalink: primer/copy-management.html 
sidebar: sidebar 
keywords: object data, ilm policy, ilm rules, replicated copy, replication, erasure-coded copy, ec, cloud storage pool 
summary: 物件資料由活動的 ILM 策略及其 ILM 規則管理。  ILM 規則製作複製或擦除編碼的副本，以保護物件資料免於遺失。 
---
= 複製管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
物件資料由活動的 ILM 策略和相關的 ILM 規則管理。  ILM 規則製作複製或擦除編碼的副本，以保護物件資料免於遺失。

在物件生命週期的不同時間可能需要不同類型或位置的物件副本。定期評估 ILM 規則以確保物件按要求放置。

對象資料由 LDR 服務管理。



== 內容保護：複製

如果 ILM 規則的內容放置指令需要複製物件資料的副本，則由組成配置的儲存池的儲存節點製作副本並將其儲存到磁碟。

LDR 服務中的 ILM 引擎控制複製並確保在正確的位置儲存正確數量的副本並儲存正確的時間。

image::../media/replication_data_flow.png[圖表顯示了周圍文字中描述的過程]

. ILM 引擎查詢 ADC 服務以決定 ILM 規則指定的儲存池內的最佳目標 LDR 服務。然後它向 LDR 服務發送命令以啟動複製。
. 目標 LDR 服務向 ADC 服務查詢最佳來源位置。然後，它會向來源 LDR 服務發送複製請求。
. 來源 LDR 服務將副本傳送至目標 LDR 服務。
. 目標 LDR 服務通知 ILM 引擎物件資料已儲存。
. ILM 引擎使用物件位置元資料更新元資料儲存。




== 內容保護：擦除編碼

如果 ILM 規則包含製作物件資料的擦除編碼副本的指令，則適用的擦除編碼方案會將物件資料分解為資料和奇偶校驗片段，並將這些片段分佈在擦除編碼設定檔中配置的儲存節點上。

ILM 引擎是 LDR 服務的一個元件，它控制擦除編碼並確保將擦除編碼設定檔套用至物件資料。

image::../media/erasure_coding_data_flow.png[清除編碼資料流]

. ILM 引擎查詢 ADC 服務以確定哪個 DDS 服務能夠最佳地執行擦除編碼操作。確定後，ILM 引擎會向該服務發送「啟動」請求。
. DDS 服務指示 LDR 對物件資料進行擦除編碼。
. 來源 LDR 服務將副本傳送給選定用於擦除編碼的 LDR 服務。
. 在建立適當數量的奇偶校驗和資料片段後，LDR 服務會將這些片段分散到構成擦除編碼設定檔儲存池的儲存節點（區塊服務）上。
. LDR服務通知ILM引擎，確認對象資料已成功分發。
. ILM 引擎使用物件位置元資料更新元資料儲存。




== 內容保護：雲端儲存池

如果 ILM 規則的內容放置指令要求將物件資料的副本儲存在雲端儲存池中，則物件資料將複製到為雲端儲存池指定的外部 S3 儲存體桶或 Azure Blob 儲存容器中。

ILM 引擎是 LDR 服務的元件，它和 Data Mover 服務控制物件到雲端儲存池的移動。

image::../media/cloud_storage_pool_data_flow.png[雲端儲存池資料流]

. ILM 引擎選擇一個 Data Mover 服務複製到雲端儲存池。
. Data Mover 服務將物件資料傳送到雲端儲存池。
. Data Mover 服務通知 ILM 引擎物件資料已儲存。
. ILM 引擎使用物件位置元資料更新元資料儲存。

