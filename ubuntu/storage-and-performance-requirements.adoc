---
permalink: ubuntu/storage-and-performance-requirements.html 
sidebar: sidebar 
keywords: storage requirements, performance requirements, host storage, host volumes, netapp ontap, fabricpool 
summary: 您必須了解StorageGRID節點的儲存需求，以便提供足夠的空間來支援初始配置和未來的儲存擴充。 
---
= 儲存和效能要求
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您必須了解StorageGRID節點的儲存需求，以便提供足夠的空間來支援初始配置和未來的儲存擴充。

StorageGRID節點需要三種邏輯類別的儲存：

* *容器池*－節點容器的效能層（10K SAS 或 SSD）存儲，當您在支援StorageGRID節點的主機上安裝和配置 Docker 時，它將指派給 Docker 儲存驅動程式。
* *系統資料*－效能層（10K SAS 或 SSD）存儲，用於每個節點持久性儲存系統資料和交易日誌， StorageGRID主機服務將使用這些資料並對應到各個節點。
* *物件資料*－效能層（10K SAS 或 SSD）儲存和容量層（NL-SAS/SATA）大容量存儲，用於持久儲存物件資料和物件元資料。


您必須對所有儲存類別使用 RAID 支援的區塊設備。不支援非冗餘磁碟、SSD 或 JBOD。您可以將共用或本機 RAID 儲存用於任何儲存類別；但是，如果您想使用StorageGRID中的節點遷移功能，則必須將系統資料和物件資料都儲存在共用儲存上。有關更多信息，請參閱link:node-container-migration-requirements.html["節點容器遷移要求"] 。



== 性能要求

用於容器池、系統資料和物件元資料的磁碟區的效能會顯著影響系統的整體效能。您應該對這些磁碟區使用效能層（10K SAS 或 SSD）存儲，以確保在延遲、每秒輸入/輸出操作數 (IOPS) 和吞吐量方面具有足夠的磁碟效能。您可以使用容量層（NL-SAS/SATA）儲存來持久儲存物件資料。

用於容器池、系統資料和物件資料的磁碟區必須啟用回寫快取。快取必須位於受保護或持久的媒體上。



== 使用NetApp ONTAP儲存的主機的需求

如果StorageGRID節點使用從NetApp ONTAP系統指派的存儲，請確認該磁碟區未啟用FabricPool分層策略。停用與StorageGRID節點一起使用的磁碟區的FabricPool分層可簡化故障排除和儲存作業。


NOTE: 切勿使用FabricPool將與StorageGRID相關的任何資料分層回StorageGRID本身。將StorageGRID資料分層回StorageGRID會增加故障排除和操作的複雜度。



== 所需主機數量

每個StorageGRID站點至少需要三個儲存節點。


NOTE: 在生產部署中，不要在單一實體或虛擬主機上執行多個儲存節點。為每個儲存節點使用專用主機可提供隔離的故障域。

其他類型的節點，例如管理節點或網關節點，可以部署在同一台主機上，也可以根據需要部署在各自的專用主機上。



== 每個主機的儲存磁碟區數量

下表顯示了每個主機所需的儲存磁碟區 (LUN) 數量以及每個 LUN 所需的最小大小（取決於將在該主機上部署哪些節點）。

測試的最大 LUN 大小為 39 TB。


NOTE: 這些數字針對的是每個主機，而不是整個網格。

[cols="1a,1a,2a,2a"]
|===
| LUN 用途 | 儲存類別 | LUN數量 | 最小大小/LUN 


 a| 
容器引擎儲存池
 a| 
貨櫃池
 a| 
1
 a| 
總節點數×100GB



 a| 
`/var/local`體積
 a| 
系統數據
 a| 
此主機上的每個節點 1 個
 a| 
90GB



 a| 
儲存節點
 a| 
對象資料
 a| 
此主機上的每個儲存節點 3 個

*注意：*基於軟體的儲存節點可以有 1 到 48 個儲存磁碟區；建議至少有 3 個儲存磁碟區。
 a| 
12 TB（4 TB/LUN）參見<<storage_req_SN,儲存節點的儲存要求>>了解更多。



 a| 
儲存節點（僅元資料）
 a| 
對像元資料
 a| 
1
 a| 
4 TB 參見<<storage_req_SN,儲存節點的儲存要求>>了解更多。

*注意*：僅元資料儲存節點只需要一個 rangedb。



 a| 
管理節點審計日誌
 a| 
系統數據
 a| 
此主機上的每個管理節點 1 個
 a| 
200GB



 a| 
管理節點表
 a| 
系統數據
 a| 
此主機上的每個管理節點 1 個
 a| 
200GB

|===

NOTE: 根據設定的稽核等級、使用者輸入的大小（例如 S3 物件金鑰名稱）以及需要保留的稽核日誌資料量，您可能需要增加每個管理節點上稽核日誌 LUN 的大小。通常，網格每個 S3 操作會產生大約 1 KB 的審計數據，這意味著 200 GB 的 LUN 可以在兩到三天內支援每天 7000 萬次操作或每秒 800 次操作。



== 主機的最小儲存空間

下表顯示了每種類型的節點所需的最小儲存空間。您可以使用此表來確定必須為每個儲存類別中的主機提供的最小儲存量，具體取決於將在該主機上部署哪些節點。


NOTE: 磁碟快照不能用於還原網格節點。相反，請參閱link:../maintain/warnings-and-considerations-for-grid-node-recovery.html["網格節點恢復"]針對每種類型的節點的程式。

[cols="1a,1a,1a,1a"]
|===
| 節點類型 | 貨櫃池 | 系統數據 | 對象資料 


 a| 
儲存節點
 a| 
100GB
 a| 
90GB
 a| 
4,000GB



 a| 
管理節點
 a| 
100GB
 a| 
490 GB（3 個 LUN）
 a| 
_不適用_



 a| 
閘道
 a| 
100GB
 a| 
90GB
 a| 
_不適用_

|===


== 範例：計算主機的儲存需求

假設您打算在同一台主機上部署三個節點：一個儲存節點、一個管理節點和一個網關節點。您應該向主機提供至少九個儲存磁碟區。您將需要至少 300 GB 的效能層儲存用於節點容器，670 GB 的效能層儲存用於系統資料和交易日誌，以及 12 TB 的容量層儲存用於物件資料。

[cols="1a,1a,1a,1a"]
|===
| 節點類型 | LUN 用途 | LUN數量 | LUN大小 


 a| 
儲存節點
 a| 
Docker 儲存池
 a| 
1
 a| 
300 GB（100 GB/節點）



 a| 
儲存節點
 a| 
`/var/local`體積
 a| 
1
 a| 
90GB



 a| 
儲存節點
 a| 
對象資料
 a| 
3
 a| 
12 TB（4 TB/LUN）



 a| 
管理節點
 a| 
`/var/local`體積
 a| 
1
 a| 
90GB



 a| 
管理節點
 a| 
管理節點審計日誌
 a| 
1
 a| 
200GB



 a| 
管理節點
 a| 
管理節點表
 a| 
1
 a| 
200GB



 a| 
閘道
 a| 
`/var/local`體積
 a| 
1
 a| 
90GB



 a| 
*全部的*
 a| 
 a| 
*9*
 a| 
*容器池：* 300 GB

*系統資料：* 670 GB

*物件資料：* 12,000 GB

|===


== 儲存節點的儲存要求

基於軟體的儲存節點可以有 1 到 48 個儲存磁碟區；建議使用 3 個或更多儲存磁碟區。每個儲存磁碟區應為 4 TB 或更大。


NOTE: 設備儲存節點還可以擁有最多 48 個儲存磁碟區。

如圖所示， StorageGRID在每個儲存節點的儲存磁碟區 0 上為物件元資料保留空間。儲存磁碟區 0 上的任何剩餘空間以及儲存節點中的任何其他儲存磁碟區均專門用於物件資料。

image::../media/metadata_space_storage_node.png[元資料空間儲存節點]

為了提供冗餘並保護物件元資料免於遺失， StorageGRID在每個站點儲存系統中所有物件的元資料的三個副本。物件元資料的三個副本均勻分佈在每個站點的所有儲存節點上。

當安裝僅具有元資料儲存節點的網格時，該網格還必須包含用於物件儲存的最小數量的節點。看link:../primer/what-storage-node-is.html#types-of-storage-nodes["儲存節點的類型"]有關僅元資料儲存節點的詳細資訊。

* 對於單一站點網格，至少配置兩個儲存節點用於物件和元資料。
* 對於多站點網格，每個站點至少配置一個儲存節點來儲存物件和元資料。


當您為新儲存節點的磁碟區 0 指派空間時，必須確保有足夠的空間容納該節點的所有物件元資料部分。

* 您必須至少為磁碟區 0 分配至少 4 TB。
+

NOTE: 如果您僅為儲存節點使用儲存卷，並且為該磁碟區指派 4 TB 或更少的容量，則儲存節點可能會在啟動時進入儲存唯讀狀態並僅儲存物件元資料。

+

NOTE: 如果您為磁碟區 0（僅非生產用途）分配少於 500 GB 的空間，則儲存磁碟區容量的 10% 將保留用於元資料。

* 基於軟體的純元資料節點資源必須與現有的儲存節點資源相符。例如：
+
** 如果現有StorageGRID站點使用 SG6000 或 SG6100 設備，則基於軟體的僅元資料節點必須符合以下最低要求：
+
*** 128 GB 內存
*** 8核心CPU
*** 8 TB SSD 或用於 Cassandra 資料庫的等效儲存空間（rangedb/0）


** 如果現有的StorageGRID站點使用具有 24 GB RAM、8 核心 CPU 和 3 TB 或 4TB 元資料儲存的虛擬儲存節點，則基於軟體的僅元資料節點應使用類似的資源（24 GB RAM、8 核心 CPU 和 4TB 元資料儲存（rangedb/0）。
+
新增新的StorageGRID站點時，新站點的總元資料容量應至少與現有StorageGRID站點相匹配，且新站點資源應與現有StorageGRID站點的儲存節點相符。



* 如果您正在安裝新系統（StorageGRID 11.6 或更高版本）並且每個儲存節點都有 128 GB 或更多的 RAM，請為磁碟區 0 分配 8 TB 或更多。對磁碟區 0 使用較大的值可以增加每個儲存節點上元資料允許的空間。
* 為網站配置不同的儲存節點時，如果可能，請對磁碟區 0 使用相同的設定。如果網站包含不同大小的儲存節點，則具有最小磁碟區 0 的儲存節點將決定該網站的元資料容量。


欲了解詳情，請訪問link:../admin/managing-object-metadata-storage.html["管理對像元資料存儲"]。
