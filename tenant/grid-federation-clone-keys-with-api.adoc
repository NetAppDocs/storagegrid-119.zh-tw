---
permalink: tenant/grid-federation-clone-keys-with-api.html 
sidebar: sidebar 
keywords: s3 access key, secret key id, account clone, tenant manager api 
summary: 如果您的租用戶帳戶具有使用網格聯合連線權限，則可以使用租用戶管理 API 將 S3 存取金鑰從來源網格上的租用戶手動複製到目標網格上的租用戶。 
---
= 使用 API 克隆 S3 存取金鑰
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
如果您的租用戶帳戶具有 *使用網格聯合連線* 權限，則可以使用租用戶管理 API 將 S3 存取金鑰從來源網格上的租用戶手動複製到目標網格上的租用戶。

.開始之前
* 租用戶帳戶具有*使用網格聯合連線*權限。
* 電網聯合連線的*連線狀態*為*已連線*。
* 您已使用link:../admin/web-browser-requirements.html["支援的網頁瀏覽器"]。
* 您屬於具有link:tenant-management-permissions.html["管理您自己的 S3 憑證或 Root 存取權限"]。
* 如果您正在為本機使用者複製存取金鑰，則該使用者已存在於兩個網格中。
+

NOTE: 當您為聯合用戶複製 S3 存取金鑰時，該使用者和 S3 存取金鑰都會新增至目標租用戶。





== 克隆您自己的存取密鑰

如果您需要存取兩個網格上的相同儲存桶，您可以複製自己的存取金鑰。

.步驟
. 使用來源網格上的租用戶管理器，link:creating-your-own-s3-access-keys.html["建立您自己的存取金鑰"]並下載 `.csv`文件。
. 從租戶管理員的頂部，選擇說明圖示並選擇*API 文件*。
. 在 *s3* 部分中，選擇以下端點：
+
`POST /org/users/current-user/replicate-s3-access-key`

+
image::../media/grid-federation-post-current-user-replicate.png[用於複製自己的存取金鑰的 POST 端點]

. 選擇*試用*。
. 在 *body* 文字方塊中，將 *accessKey* 和 *secretAccessKey* 的範例條目替換為您下載的 *.csv* 檔案中的值。
+
確保保留每個字串周圍的雙引號。

+
image::../media/grid-federation-clone-access-key.png[租用戶管理員 API 輸入值以克隆存取金鑰]

. 如果金鑰即將過期，請將 *expires* 的範例條目替換為 ISO 8601 資料時間格式的過期日期和時間字串（例如， `2024-02-28T22:46:33-08:00` ）。如果金鑰不會過期，請輸入 *null* 作為 *expires* 條目的值（或刪除 *Expires* 行和前面的逗號）。
. 選擇*執行*。
. 確認伺服器回應代碼為*204*，表示金鑰已成功複製到目標網格。




== 克隆其他使用者的存取密鑰

如果另一個使用者需要存取兩個網格上的相同儲存桶，您可以複製該使用者的存取金鑰。

.步驟
. 使用來源網格上的租用戶管理器，link:creating-another-users-s3-access-keys.html["建立其他使用者的 S3 存取金鑰"]並下載 `.csv`文件。
. 從租戶管理員的頂部，選擇說明圖示並選擇*API 文件*。
. 取得用戶ID。您將需要此值來克隆其他使用者的存取金鑰。
+
.. 從 *users* 部分，選擇以下端點：
+
`GET /org/users`

.. 選擇*試用*。
.. 指定查找使用者時要使用的任何參數。
.. 選擇*執行*。
.. 找到您想要複製其金鑰的用戶，並複製 *id* 欄位中的數字。


. 在 *s3* 部分中，選擇以下端點：
+
`POST /org/users/{userId}/replicate-s3-access-key`

+
image::../media/grid-federation-post-other-user.png[用於複製另一個使用者的存取金鑰的 POST 端點]

. 選擇*試用*。
. 在 *userId* 文字方塊中，貼上您複製的使用者 ID。
. 在 *body* 文字方塊中，將 *example access key* 和 *secret access key* 的範例條目替換為該使用者的 *.csv* 檔案中的值。
+
確保保留字串周圍的雙引號。

. 如果金鑰即將過期，請將 *expires* 的範例條目替換為 ISO 8601 資料時間格式的過期日期和時間字串（例如， `2023-02-28T22:46:33-08:00` ）。如果金鑰不會過期，請輸入 *null* 作為 *expires* 條目的值（或刪除 *Expires* 行和前面的逗號）。
. 選擇*執行*。
. 確認伺服器回應代碼為*204*，表示金鑰已成功複製到目標網格。

