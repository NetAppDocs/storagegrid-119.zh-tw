---
permalink: troubleshoot/troubleshooting-syslog-server.html 
sidebar: sidebar 
keywords: how to troubleshoot the external syslog server 
summary: 下表描述了可能與外部系統日誌伺服器相關的錯誤訊息並列出了糾正措施。 
---
= 排除外部系統日誌伺服器故障
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
下表描述了可能與外部系統日誌伺服器相關的錯誤訊息並列出了糾正措施。

有關將審計資訊傳送到外部系統日誌伺服器的更多信息，請參閱：

* link:../monitor/considerations-for-external-syslog-server.html["使用外部系統日誌伺服器的注意事項"]
* link:../monitor/configure-audit-messages.html["設定審計訊息和外部系統日誌伺服器"]


[cols="1a,3a"]
|===
| 錯誤訊息 | 描述和建議的操作 


 a| 
無法解析主機名
 a| 
您為 syslog 伺服器輸入的 FQDN 無法解析為 IP 位址。

. 檢查您輸入的主機名稱。如果您輸入了 IP 位址，請確保它是 WXYZ（「點分十進位」）表示法的有效 IP 位址。
. 檢查 DNS 伺服器是否配置正確。
. 確認每個節點都可以存取 DNS 伺服器的 IP 位址。




 a| 
連線被拒絕
 a| 
與系統日誌伺服器的 TCP 或 TLS 連線被拒絕。可能沒有服務監聽主機的 TCP 或 TLS 端口，或者防火牆可能阻止了訪問。

. 檢查您是否輸入了系統日誌伺服器的正確 FQDN 或 IP 位址、連接埠和協定。
. 確認 syslog 服務的主機正在執行偵聽指定連接埠的 syslog 守護程序。
. 確認防火牆沒有阻止從節點到 syslog 伺服器的 IP 和連接埠的 TCP/TLS 連線存取。




 a| 
網路不可達
 a| 
系統日誌伺服器不在直接連接的子網路上。路由器傳回 ICMP 故障訊息，表示它無法將列出的節點的測試訊息轉送到系統日誌伺服器。

. 檢查您是否輸入了系統日誌伺服器的正確 FQDN 或 IP 位址。
. 對於列出的每個節點，檢查網格網路子網路清單、管理網路子網路清單和用戶端網路閘道。確認這些設定已透過預期的網路介面和網關（網格、管理或用戶端）將流量路由到 syslog 伺服器。




 a| 
主機不可達
 a| 
系統日誌伺服器位於直接連接的子網路（列出的節點用於其網格、管理或客戶端 IP 位址的子網路）。節點嘗試傳送測試訊息，但未收到對系統日誌伺服器 MAC 位址的 ARP 請求的回應。

. 檢查您是否輸入了系統日誌伺服器的正確 FQDN 或 IP 位址。
. 檢查執行 syslog 服務的主機是否已啟動。




 a| 
連線逾時
 a| 
嘗試了 TCP/TLS 連接，但很長時間沒有收到來自 syslog 伺服器的回應。可能存在路由配置錯誤，或防火牆可能丟棄流量而不發送任何回應（常見配置）。

. 檢查您是否輸入了系統日誌伺服器的正確 FQDN 或 IP 位址。
. 對於列出的每個節點，檢查網格網路子網路清單、管理網路子網路清單和用戶端網路閘道。確認這些設定已使用您期望到達 syslog 伺服器的網路介面和網關（網格、管理或用戶端）將流量路由到 syslog 伺服器。
. 確認防火牆沒有阻止從列出的節點到 syslog 伺服器的 IP 和連接埠的 TCP/TLS 連線存取。




 a| 
連線已被合作夥伴關閉
 a| 
與 syslog 伺服器的 TCP 連線已成功建立，但隨後被關閉。造成這種情況的原因可能包括：

* 系統日誌伺服器可能已重新啟動或重新啟動。
* 節點和系統日誌伺服器可能有不同的 TCP/TLS 設定。
* 中間防火牆可能正在關閉空閒的 TCP 連線。
* 監聽 syslog 伺服器連接埠的非 syslog 伺服器可能已關閉連線。


要解決此問題：

. 檢查您是否輸入了系統日誌伺服器的正確 FQDN 或 IP 位址、連接埠和協定。
. 如果您正在使用 TLS，請確認 syslog 伺服器也正在使用 TLS。如果您使用的是 TCP，請確認 syslog 伺服器也使用 TCP。
. 檢查中間防火牆是否未配置為關閉閒置的 TCP 連線。




 a| 
TLS 憑證錯誤
 a| 
從 syslog 伺服器收到的伺服器憑證與您提供的 CA 憑證包和用戶端憑證不相容。

. 確認 CA 憑證包和用戶端憑證（如果有）與 syslog 伺服器上的伺服器憑證相容。
. 確認來自 syslog 伺服器的伺服器憑證中的身分包含預期的 IP 或 FQDN 值。




 a| 
轉發暫停
 a| 
Syslog 記錄不再轉送到 syslog 伺服器，且StorageGRID無法偵測原因。

查看此錯誤提供的偵錯日誌以嘗試確定根本原因。



 a| 
TLS 會話已終止
 a| 
系統日誌伺服器終止了 TLS 會話，而StorageGRID無法偵測原因。

. 查看此錯誤提供的偵錯日誌以嘗試確定根本原因。
. 檢查您是否輸入了系統日誌伺服器的正確 FQDN 或 IP 位址、連接埠和協定。
. 如果您正在使用 TLS，請確認 syslog 伺服器也正在使用 TLS。如果您使用的是 TCP，請確認 syslog 伺服器也使用 TCP。
. 確認 CA 憑證包和用戶端憑證（如果有）與來自 syslog 伺服器的伺服器憑證相容。
. 確認來自 syslog 伺服器的伺服器憑證中的身分包含預期的 IP 或 FQDN 值。




 a| 
結果查詢失敗
 a| 
用於系統日誌伺服器配置和測試的管理節點無法從列出的節點請求測試結果。一個或多個節點可能已關閉。

. 按照標準故障排除步驟確保節點在線上並且所有預期服務都在運作。
. 在列出的節點上重新啟動 miscd 服務。


|===